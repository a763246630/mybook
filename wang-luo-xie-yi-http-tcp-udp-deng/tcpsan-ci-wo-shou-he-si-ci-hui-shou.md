### TCP三次握手

![](/assets/tcp1.png)

* **序号**：Seq序号，占32位，用来标识从TCP源端向目的端发送的字节流，发起方发送数据时对此进行标记。

* **确认序号**: Ack序号，占32位，只有ACK标志位为1时，确认序号才有效,Ack=SEQ+1

* **标志位**：共6个，即URG、ACK、PSH、RST、SYN、FIN等，具体含义如下：

> （A）URG：紧急指针（urgent pointer）有效。
>
> （B）ACK：确认序号有效。
>
> （C）PSH：接收方应该尽快将这个报文交给应用层。
>
> （D）RST：重置连接。
>
> （E）SYN：发起一个新连接。
>
> （F）FIN：释放一个连接。
>
> **需要注意的是：**
>
> （A）不要将确认序号Ack与标志位中的ACK搞混了。
>
> （B）确认方Ack=发起方Req+1，两端配对。

所谓三次握手（Three-Way Handshake）即建立TCP连接，就是指建立一个TCP连接时，需要客户端和服务端总共发送3个包以确认连接的建立。在socket编程中，这一过程由客户端执行connect来触发，整个流程如下图所示：

![](/assets/tcp2.png)



