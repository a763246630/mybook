普通二叉树

1.特点

根节点只有一个

左边节点大于右边节点

所以易于查找，是一种很好的数据结构。但是它有一个问题，就是容易偏向某一侧，这样就像一个链表结构了，失去了树结构的优点，查找时间会变坏。

字段递增字段（如存储 1,2,3,4,5,6 这种连续数据 树的高度会过高，导致查找次数过多）会变成单边链表的结构.

2-3树

2-3树是二叉查找树的变种，树中的2和3代表两种节点，以下表示为2-节点和3-节点。

2-节点即普通节点：包含一个元素，两条子链接。

3-节点则是扩充版，包含2个元素和三条链接：两个元素A、B，左边的链接指向小于A的节点，中间的链接指向介于A、B值之间的节点，右边的链接指向大于B的节点。

红黑树

1. 每个节点要么是红色，要么是黑色；

2. 根节点永远是黑色的；

3. 所有的叶节点都是是黑色的（注意这里说叶子节点其实是上图中的 NIL 节点）；

4. 每个红色节点的两个子节点一定都是黑色；

5. **从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点**\(黑树平衡\)；

红黑树也是平衡二叉查找树的一种实现。

因此不建议对数据频繁变更的列建立索引，因为在这个过程中，索引的结构变更必然会带来IO流和CPU的损耗。

缺点：

1.搜索效率不足。 因为归根结底还是二叉树结构，因此在数据量大的时候，树的高度极高，也就意味着可能一次查找需要超多次数的IO。

2.节点数据内容太少。每一个节点中保存的数据远远不够填满一次内存和磁盘交互的值。如果一次内存和磁盘的交互为4KB，那么一个节点中保存的数据其实就大大浪费了这个空间。

B tree（多路平衡查找树，绝对平衡）

一个节点保存多个key

通过左旋或右旋来保持绝对平衡\(每个节点\),所有的叶子节点都在同一层

所有的元素不重复

节点中的数据索引从左到右递增

缺点:data存在根节点,根节点存放的key会变少,高度会变高.

B+tree

1. 非叶子节点只存储key信息\(冗余叶子间的中间数据\)。\(可以存储更多的key,降低高度,查询复杂度\)

2. 所有叶子节点之间都有一个链指针链接。（查询大于子节点数据不用回到根节点去拿数据。）

3. 数据记录都存放在叶子节点中。

hash 索引计算 索引字段的hash值，根据hash值去hash表查到对应的指针

缺点：无法支持范围查询，模糊查询，排序。

聚集索引是指 索引和数据一起存在。

为什么Innodb必须要主键，并且推荐使用整型的自增主键？

mysql必须有主键索引组织数据，如果没有建索引mysql会自动生成rowid做主键。

整型比较，运算等比较快。

为什么非主键索引结构叶子节点存储的是主键值？

保证插入主键索引和其他索引的一致性。节省空间（其他数据不用存数据）

联合最左前缀原则

1.为什么必须包含最左列

b+树会**优先比较第一列来确定下一步的所搜方向**

索引树会根据第一字段排序分段存储

InnoDB普通索引的叶子节点存储**主键值**。

InnoDB聚集索引的叶子节点存储**行记录**，

mysql innodb的默认的页大小是16k

联合索引的第二个好处是在第一个键相同的情况下，已经对第二个键进行了排序处理

索引的数据结构

##### hash

优点：



因为索引自身只需存储对应的哈希值，所以索引的结构十分紧凑，这也让哈希索引查找的速度非常快



缺点：



1、不能避免读取行



哈希索引只包含哈希值和行指针，而不存储字段值，所以不能使用索引中的值来避免读取行。不过，访问内存中的行的速度很快，所以大部分情况下这一点对性能的影响并不明显。



2、无法用于排序



哈希索引数据并不是按照索引值顺序存储的，所以也就无法用于排序。



3、无法使用部分索引列匹配查找



哈希索引也不支持部分索引列匹配查找，因为哈希索引始终是使用索引列的全部内容来计算哈希值的。例如，在数据列（A,B）上建立哈希索引，如果查询只有数据列A，则无法使用该索引。



4、只支持等值查找



哈希索引只支持等值比较查询，包括=、IN\(\)、&lt;=&gt;（注意&lt;&gt;和&lt;=&gt;是不同的操作）。也不支持任何范围查询，例如WHERE price&gt;100。



5、存在Hash冲突



访问哈希索引的数据非常快，除非有很多哈希冲突（不同的索引列值却有相同的哈希值）。当出现哈希冲突的时候，存储引擎必须遍历链表中所有的行指针，逐行进行比较，直到找到所有符合条件的行。



同时，当哈希冲突很多的时候，一些索引维护操作的代价也会很高。例如，如果在某个选择性很低（哈希冲突很多）的列上建立哈希索引，那么当从表中删除一行时，存储引擎需要遍历对应哈希值的链表中的每一行，找到并删除对应行的引用，冲突越多，代价越大。

##### b+tree



