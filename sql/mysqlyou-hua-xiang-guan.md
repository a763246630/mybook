普通二叉树

1.特点

根节点只有一个

左边节点大于右边节点

所以易于查找，是一种很好的数据结构。但是它有一个问题，就是容易偏向某一侧，这样就像一个链表结构了，失去了树结构的优点，查找时间会变坏。

字段递增字段（如存储 1,2,3,4,5,6 这种连续数据 树的高度会过高，导致查找次数过多）会变成单边链表的结构.

2-3树

2-3树是二叉查找树的变种，树中的2和3代表两种节点，以下表示为2-节点和3-节点。

2-节点即普通节点：包含一个元素，两条子链接。

3-节点则是扩充版，包含2个元素和三条链接：两个元素A、B，左边的链接指向小于A的节点，中间的链接指向介于A、B值之间的节点，右边的链接指向大于B的节点。

红黑树

1. 每个节点要么是红色，要么是黑色；

2. 根节点永远是黑色的；

3. 所有的叶节点都是是黑色的（注意这里说叶子节点其实是上图中的 NIL 节点）；

4. 每个红色节点的两个子节点一定都是黑色；

5. **从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点**\(黑树平衡\)；

红黑树也是平衡二叉查找树的一种实现。

因此不建议对数据频繁变更的列建立索引，因为在这个过程中，索引的结构变更必然会带来IO流和CPU的损耗。

缺点：

1.搜索效率不足。 因为归根结底还是二叉树结构，因此在数据量大的时候，树的高度极高，也就意味着可能一次查找需要超多次数的IO。

2.节点数据内容太少。每一个节点中保存的数据远远不够填满一次内存和磁盘交互的值。如果一次内存和磁盘的交互为4KB，那么一个节点中保存的数据其实就大大浪费了这个空间。

B tree（多路平衡查找树，绝对平衡）

一个节点保存多个key

通过左旋或右旋来保持绝对平衡\(每个节点\),所有的叶子节点都在同一层

所有的元素不重复

节点中的数据索引从左到右递增

缺点:data存在根节点,根节点存放的key会变少,高度会变高.

B+tree

1. 非叶子节点只存储key信息\(冗余叶子间的中间数据\)。\(可以存储更多的key,降低高度,查询复杂度\)

2. 所有叶子节点之间都有一个链指针链接。（查询大于子节点数据不用回到根节点去拿数据。）

3. 数据记录都存放在叶子节点中。

hash 索引计算 索引字段的hash值，根据hash值去hash表查到对应的指针

缺点：无法支持范围查询，模糊查询，排序。

聚集索引是指 索引和数据一起存在。

为什么Innodb必须要主键，并且推荐使用整型的自增主键？

mysql必须有主键索引组织数据，如果没有建索引mysql会自动生成rowid做主键。

整型比较，运算等比较快。

为什么非主键索引结构叶子节点存储的是主键值？

保证插入主键索引和其他索引的一致性。节省空间（其他数据不用存数据）

联合最左前缀原则

1.为什么必须包含最左列

b+树会**优先比较第一列来确定下一步的所搜方向**

索引树会根据第一字段排序分段存储

InnoDB普通索引的叶子节点存储**主键值**。

InnoDB聚集索引的叶子节点存储**行记录**，

mysql innodb的默认的页大小是16k

联合索引的第二个好处是在第一个键相同的情况下，已经对第二个键进行了排序处理



索引的数据结构

hash



b+tree

